# Dockerfile för HTTP-server (ChatGPT-kompatibel)
FROM ghcr.io/astral-sh/uv:python3.12-bookworm-slim

WORKDIR /app

# Kopiera projektfiler
COPY pyproject.toml .
COPY README.md .
COPY LICENSE .
COPY src/ ./src/

# Installera dependencies
RUN uv sync --frozen

# Railway exponerar PORT som environment variable
# Vi behöver sätta den till 8001 som vår app förväntar sig
ENV PORT=8001

# Exponera port (Railway använder $PORT automatiskt)
EXPOSE $PORT

# Starta HTTP-server
CMD ["uv", "run", "kolada-mcp-http"]
